{{define "navbar"}}
<!-- 
	TODO: Fix navbar placement issue
		Issue: because I turned off the toggle feature of bootstrap navbar, the placement of the navbar is all weird.  I have to put a vertical spacer below it in app.html to make non-home pages display correctly.
		Problem with fix: the home page looks like shit.
-->
<nav class="navbar navbar-expand fixed-top navbar-dark bg-primary">
	<a href="/" class="navbar-brand">Nathaniel J. Wheeler</a>

	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navContent"
		aria-controls="navContent" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse " id="navContent">
		<ul class="navbar-nav">

			<li class="nav-item" id="nav-resume"><a class="nav-link" href="/resume">
					Resume
				</a></li>

			<li class="nav-item" id="nav-blog"><a class="nav-link" href="/blog">
					Blog
				</a></li>

			<!-- TODO Ideally, I want this section right-aligned -->
			{{if .User}}
			<li class="nav-item navform">{{template "logoutForm"}}</li>
			{{else}}
			<li class="nav-item"><a class="nav-link" href="/login">
					Login
				</a></li>
			{{end}}

			<!-- Admin Panel -->
			{{if .User }}
			{{if .User.IsAdmin}}
			<li class="nav-item"><a class="nav-link" href="/posts/new">
					New Post
				</a></li>
			{{end}}
			{{end}}
		</ul>
	</div>
</nav>

<!-- To check URL for path prefixes and then activate the respective nav-item. -->
<script>

	let path = window.location.pathname.split("/");

	if (path[1]) {
		let pathPrefix = path[1]
		switch (pathPrefix) {
			case "resume":
				document.getElementById("nav-resume").className += " active";
				break;
			case "blog":
				document.getElementById("nav-blog").className += " active";
				break;
			default:
				break;
		}
	}

</script>
{{end}}